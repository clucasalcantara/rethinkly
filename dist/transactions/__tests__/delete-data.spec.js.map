{"version":3,"sources":["../../../src/transactions/__tests__/delete-data.spec.js"],"names":["getConnection","host","process","env","ENV","port","db","t","conn","dbCreated","tableCreated","teste","generated_keys","length","errors","pass"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA,IAAMA,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAG;AAAA;AAAA;AAAA;AAAA;AAAA,6CACpB,4BAAW;AACTC,cAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,GAAZ,KAAoB,MAApB,GAA6B,YAA7B,GAA4C,WADzC;AAETC,cAAAA,IAAI,EAAE,OAFG;AAGTC,cAAAA,EAAE,EAAE;AAHK,aAAX,CADoB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAbN,aAAa;AAAA;AAAA;AAAA,GAAnB;AAOA;;;AACA,qBAAK,gDAAL;AAAA;AAAA;AAAA;AAAA;AAAA,+BAAuD,kBAAMO,CAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAClCP,aAAa,EADqB;;AAAA;AAC/CQ,YAAAA,IAD+C;AAAA;AAAA,mBAE7B,8BAAeA,IAAf,EAAqB,kBAArB,CAF6B;;AAAA;AAE/CC,YAAAA,SAF+C;;AAAA,iBAGjDA,SAHiD;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAIxB,wBAAYD,IAAZ,EAAkB,kBAAlB,CAJwB;;AAAA;AAI7CE,YAAAA,YAJ6C;;AAAA,iBAK/CA,YAL+C;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAMX,4BAAWF,IAAX,EAAiB,kBAAjB,EAAqC;AAAEG,cAAAA,KAAK,EAAE;AAAT,aAArC,CANW;;AAAA;AAAA;AAAA,yCAMzCC,cANyC;AAMzCA,YAAAA,cANyC,qCAMxB,EANwB;;AAAA,kBAO7CA,cAAc,CAACC,MAAf,GAAwB,CAPqB;AAAA;AAAA;AAAA;;AAAA;AAAA,mBAQtB,4BAAWL,IAAX,EAAiB,kBAAjB,EAAqCI,cAAc,CAAC,CAAD,CAAnD,CARsB;;AAAA;AAAA;AAQvCE,YAAAA,MARuC,SAQvCA,MARuC;;AAS/C,gBAAI,CAACA,MAAL,EAAa;AACXP,cAAAA,CAAC,CAACQ,IAAF,kBAAiBH,cAAc,CAAC,CAAD,CAA/B;AACD;;AAX8C;AAAA;AAAA,mBAgB/C,4BAAaJ,IAAb,EAAmB,kBAAnB,CAhB+C;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvD;;AAAA;AAAA;AAAA;AAAA;AAkBA","sourcesContent":["import test from 'ava'\nimport createLink from '../../connection'\nimport { createDatabase, dropDatabase } from '../database'\nimport { createTable } from '../table'\nimport insertData from '../insert-data'\nimport deleteData from '../delete-data'\n\nconst getConnection = async () =>\n  createLink({\n    host: process.env.ENV === 'mock' ? '172.18.0.2' : 'localhost',\n    port: '28015',\n    db: 'deletion_example',\n  })\n\n/* eslint-disable camelcase */\ntest('[transactions]: should delete a value properly', async t => {\n  const conn = await getConnection()\n  const dbCreated = await createDatabase(conn, 'deletion_example')\n  if (dbCreated) {\n    const tableCreated = await createTable(conn, 'deletion_example')\n    if (tableCreated) {\n      const { generated_keys = [] } = await insertData(conn, 'deletion_example', { teste: 'pass' })\n      if (generated_keys.length > 0) {\n        const { errors } = await deleteData(conn, 'deletion_example', generated_keys[0])\n        if (!errors) {\n          t.pass(`Record ${generated_keys[0]} deleted successfully`)\n        }\n      }\n    }\n  }\n\n  await dropDatabase(conn, 'deletion_example')\n})\n/* eslint-enable camelcase */\n"],"file":"delete-data.spec.js"}