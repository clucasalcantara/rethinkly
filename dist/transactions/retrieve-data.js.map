{"version":3,"sources":["../../src/transactions/retrieve-data.js"],"names":["processResults","results","connection","tableName","id","rethinkdb","table","run","then","cursor","toArray","err","get","result"],"mappings":";;;;;;;AAIA;;;;;;;;AAEA;;;;;;;AAOA,IAAMA,cAAc,GAAG,SAAjBA,cAAiB,CAAAC,OAAO;AAAA,SAAIA,OAAJ;AAAA,CAA9B;AAEA;;;;;;;;;;;;;;;0BAQe,iBAAOC,UAAP,EAAmBC,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8BC,YAAAA,EAA9B,2DAAmC,IAAnC;;AAAA,gBACRA,EADQ;AAAA;AAAA;AAAA;;AAAA,6CAEJC,sBACJC,KADI,CACEH,SADF,EAEJI,GAFI,CAEAL,UAFA,EAGJM,IAHI,CAGC,UAAAC,MAAM;AAAA,qBACVA,MAAM,CAACC,OAAP,CAAe,UAACC,GAAD,EAAMV,OAAN,EAAkB;AAC/B,oBAAIU,GAAJ,EAAS,MAAMA,GAAN;AAETX,gBAAAA,cAAc,CAACC,OAAD,CAAd;AACD,eAJD,CADU;AAAA,aAHP,CAFI;;AAAA;AAAA,6CAcNI,sBACJC,KADI,CACEH,SADF,EAEJS,GAFI,CAEAR,EAFA,EAGJG,GAHI,CAGAL,UAHA,EAIJM,IAJI,CAIC,UAAAK,MAAM;AAAA,qBAAIA,MAAJ;AAAA,aAJP,CAdM;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["/**\n * Retrieve data module\n * @memberof rethinkly\n */\nimport rethinkdb from 'rethinkdb'\n\n/**\n * ProcessResults\n * Callback to process data on gathering, for now don't\n * need any transformation\n * @param {Array} results\n * @return {Array} results\n */\nconst processResults = results => results\n\n/**\n * RetrieveData\n * Grab data from database\n * @param {Object} connection\n * @param {String} tableName\n * @param {String} id?\n * @returns {Array||Object} results || result\n */\nexport default async (connection, tableName, id = null) => {\n  if (!id) {\n    return rethinkdb\n      .table(tableName)\n      .run(connection)\n      .then(cursor =>\n        cursor.toArray((err, results) => {\n          if (err) throw err\n\n          processResults(results)\n        })\n      )\n  }\n\n  return rethinkdb\n    .table(tableName)\n    .get(id)\n    .run(connection)\n    .then(result => result)\n}\n"],"file":"retrieve-data.js"}